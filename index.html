<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test LeetCode</title>
</head>
<body>
    <script>
        /**
         * @param {number[][]} grid
         * @return {number}
         */
        var orangesRotting = function(grid) {
            const rots = []
            const m = grid.length
            const n = grid[0].length
            for(let i = 0; i < m; i++){
                for(let j = 0; j < n; j++){
                    if(grid[i][j] === 2){
                        rots.push([i,j])
                    }
                }
            }
            
            let rotlen = rots.length
            let minu = 0
            while(rots.length > 0){
                rotlen -= 1
                const [i,j] = rots.pop()
                for(let [x,y] of [[1,0],[-1,0],[0,1],[0,-1]]){
                    const ki = i + x
                    const kj = j + y
                    if(ki >= 0 && kj >= 0 && ki < m && kj < n && grid[ki][kj] === 1){
                        grid[ki][kj] = 2
                        rots.unshift([ki,kj])
                    }
                }
                
                if(rotlen <= 0){
                    rotlen = rots.length
                    if(rotlen > 0){
                        minu += 1
                    }
                }
            }
            for(let i = 0; i < m; i++){
                for(let j = 0; j < n; j++){
                    if(grid[i][j] === 1){
                        return -1
                    }
                }
            }

            return minu
        };
        orangesRotting([[2,1,1],[1,1,0],[0,1,1]])
    </script>
</body>
</html>